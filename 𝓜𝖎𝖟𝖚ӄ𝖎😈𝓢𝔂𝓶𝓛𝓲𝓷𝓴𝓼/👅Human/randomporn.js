// тж┐тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтФАтФАтФАтФАтФАтФА[]  ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв   []тФАтФАтФАтФАтФАтФАтАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтж┐
const { MessageType, Mimetype } = require(`@adiwajshing/baileys`);
const ffmpegInstaller = require("@ffmpeg-installer/ffmpeg");
const ffprobe = require("@ffprobe-installer/ffprobe");
const ffmpeg = require("fluent-ffmpeg")()
  .setFfprobePath(ffprobe.path)
  .setFfmpegPath(ffmpegInstaller.path);
const _ЁЭФПЁЭФЮЁЭФЯ_ = require(`../../ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦОЁЯзАЁЭУТЁЭУ╗ЁЭУкЁЭУ╜ЁЭУо/_ЁЭФПЁЭФЮЁЭФЯ_`);
const тДУ╬╣╤Ф╬╖╤В = require(`../../ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦОЁЯзАЁЭУТЁЭУ╗ЁЭУкЁЭУ╜ЁЭУо/catch`);
const RandomHub = require("random-hub").RandomHub;
const hub = new RandomHub();
const Downloader = require(`nodejs-file-downloader`);
const fs = require(`fs`);
var с┤Лс┤З╔кс┤Зx = new RegExp(_ЁЭФПЁЭФЮЁЭФЯ_.FOXTROT, `g`);
var с┤Лс┤З╔к = /\/\^\[(.*)+\]\/\g/g.exec(с┤Лс┤З╔кс┤Зx)[1];
// тж┐тАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАв[  ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв   ]тАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтж┐
module.exports = {
  name: `randomporn`,
  async handle(╙Д╩А╟Я╙Д╔и╒╝╩Р, chat, ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО, arg, ЁЭУЬЁЭУ▓ЁЭФГЁЭУ╛ЁЭУ┤ЁЭУ▓ЁЭУвЁЭУ▓ЁЭУ╜ЁЭУ╗ЁЭУоЁЭУ╣) {
    try {
      // тж┐тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтФАтФАтФАтФАтФАтФА[]  ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв   []тФАтФАтФАтФАтФАтФАтАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтж┐
      var ъЬ▒с┤З╔┤с┤Ес┤З╩А╔кс┤Е = ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.sender;
      var ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived = ъЬ▒с┤З╔┤с┤Ес┤З╩А╔кс┤Е.substring(0, ъЬ▒с┤З╔┤с┤Ес┤З╩А╔кс┤Е.length - 15);
      const defaultnm = ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.commandName;
      const FinalName = defaultnm.charAt(0).toUpperCase() + defaultnm.slice(1);
      console.log("ЁЭРУЁЭРиЁЭРйЁЭРвЁЭРЬ: " + FinalName);
      // тж┐тАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАв[  ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв   ]тАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтж┐
      if (
        ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.isGroup &&
        (!ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.isSenderGroupAdmin || !ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.isSenderKRAK)
      ) {
        let content = fs.readFileSync(_ЁЭФПЁЭФЮЁЭФЯ_.MINAN);
        const media = await ╙Д╩А╟Я╙Д╔и╒╝╩Р.prepareMessage(
          ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.chatId,
          content,
          MessageType.image,
          {
            mimetype: Mimetype.png,
          }
        );
        const buttons = [
          {
            buttonId: `${с┤Лс┤З╔к}help`,
            buttonText: { displayText: `${с┤Лс┤З╔к}help` },
            type: 1,
          },
        ];
        const buttonMessage = {
          contentText: `тЭМ @${ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived},  *You Are Not Allowed!*

_тЭЧIn Groups This Command allowed to Admins & Developers!_`,
          footerText: `_ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв_`,
          buttons: buttons,
          headerType: 4,
          imageMessage: media.message.imageMessage,
        };
        return await ╙Д╩А╟Я╙Д╔и╒╝╩Р
          .sendMessage(
            ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.chatId,
            buttonMessage,
            MessageType.buttonsMessage,
            {
              quoted: chat,
              contextInfo: { mentionedJid: [ъЬ▒с┤З╔┤с┤Ес┤З╩А╔кс┤Е] },
            }
          )
          .catch((тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П) => тДУ╬╣╤Ф╬╖╤В.catch(тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П, ╙Д╩А╟Я╙Д╔и╒╝╩Р, ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО));
        // тж┐тАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАв[  ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв   ]тАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтАвтж┐
      } else {
        try {
          var amazeme = await hub.getRandomHub();
          console.log(amazeme);
          const downloader = await new Downloader({
            url: amazeme,
            directory: `./ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦОЁЯЧСя╕ПЁЭУСЁЭУ▓ЁЭУ╖`,
            fileName: `${FinalName}_${ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived}.gif`,
            cloneFiles: false,
          });
          try {
            await downloader.download();
          } catch (тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П) {
            тДУ╬╣╤Ф╬╖╤В.catch(тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П, ╙Д╩А╟Я╙Д╔и╒╝╩Р, ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО);
          }
          // тж┐тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтФАтФАтФАтФАтФАтФА[]  ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв   []тФАтФАтФАтФАтФАтФАтАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтж┐
          await ffmpeg
            .input(`./ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦОЁЯЧСя╕ПЁЭУСЁЭУ▓ЁЭУ╖/${FinalName}_${ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived}.gif`)
            .outputOptions([
              "-pix_fmt yuv420p",
              "-c:v libx264",
              "-movflags +faststart",
              "-filter:v crop='floor(in_w/2)*2:floor(in_h/2)*2'",
            ])
            .noAudio()
            .output(`./ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦОЁЯЧСя╕ПЁЭУСЁЭУ▓ЁЭУ╖/${FinalName}_${ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived}.mp4`)
            .on("end", async () => {
              console.log("Finished");
              await ╙Д╩А╟Я╙Д╔и╒╝╩Р
                .sendMessage(
                  ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.chatId,
                  fs.readFileSync(
                    `./ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦОЁЯЧСя╕ПЁЭУСЁЭУ▓ЁЭУ╖/${FinalName}_${ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived}.mp4`
                  ),
                  MessageType.video,
                  {
                    contextInfo: { mentionedJid: [ъЬ▒с┤З╔┤с┤Ес┤З╩А╔кс┤Е] },
                    quoted: chat,
                    mimetype: "video/gif",
                    caption: `_ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв_

тФМтФАтФАтФАтФАтнУ
тФВтж┐ ЁЭРОЁЭРлЁЭРЭЁЭРЮЁЭРлЁЭРЮЁЭРЭЁЭРБЁЭР▓: @${ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived} 
тФВтж┐ ЁЭРУЁЭРиЁЭРйЁЭРвЁЭРЬ: *${ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО.commandName.toUpperCase()}*
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтнУ
ЁЯФЧЁЭРЛЁЭРвЁЭРзЁЭРд: ${amazeme}`,
                  }
                )
                .then(async () => {
                  await fs.unlinkSync(
                    `./ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦОЁЯЧСя╕ПЁЭУСЁЭУ▓ЁЭУ╖/${FinalName}_${ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived}.gif`
                  );
                  await fs.unlinkSync(
                    `./ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦОЁЯЧСя╕ПЁЭУСЁЭУ▓ЁЭУ╖/${FinalName}_${ъЬ▒с┤З╔┤с┤Ес┤З╩Аeceived}.mp4`
                  );
                })
                .catch((тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П) => тДУ╬╣╤Ф╬╖╤В.catch(тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П, ╙Д╩А╟Я╙Д╔и╒╝╩Р, ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО));
            })
            .on("error", (e) => console.log(e))
            .run();
        } catch (тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П) {
          тДУ╬╣╤Ф╬╖╤В.catch(тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П, ╙Д╩А╟Я╙Д╔и╒╝╩Р, ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО);
        }
      }
      // тж┐тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтФАтФАтФАтФАтФАтФА[]  ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв   []тФАтФАтФАтФАтФАтФАтАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтж┐
    } catch (тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П) {
      тДУ╬╣╤Ф╬╖╤В.catch(тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П, ╙Д╩А╟Я╙Д╔и╒╝╩Р, ЁЭУЬЁЭЦОЁЭЦЯЁЭЦЪ╙ДЁЭЦО);
      console.log(тДУ╬▒╨▓╤Ф╤П╤П╧Г╤П);
    }
  },
};
// тж┐тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтФАтФАтФАтФАтФАтФА[]  ЁЭРМЁЭРвЁЭР│ЁЭРоЁЭРдЁЭРвтДв   []тФАтФАтФАтФАтФАтФАтАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАв=тАвтж┐
